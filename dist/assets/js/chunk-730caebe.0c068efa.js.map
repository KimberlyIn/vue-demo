{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./src/views/Products.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/components/DelModal.vue","webpack:///./src/components/Pagination.vue","webpack:///./src/components/ProductModal.vue","webpack:///./src/views/Products.vue?95da"],"names":["$","DESCRIPTORS","ownKeys","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","target","stat","sham","getOwnPropertyDescriptors","object","key","descriptor","O","getOwnPropertyDescriptor","f","keys","result","index","length","undefined","fails","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","FORCED","forced","it","class","width","active","isLoading","z-index","type","openModal","products","item","id","category","title","$filters","currency","origin_price","price","is_enabled","openDelProuctModal","pages","pagination","getProducts","updateProduct","product","tempProduct","isNew","ref","delProduct","enumerableOnly","Object","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread2","i","arguments","source","forEach","defineProperty","defineProperties","script","data","status","fileUploading","modal","editModal","delModal","currentPage","components","ProductModal","DelModal","Pagination","inject","methods","page","this","api","$http","get","then","response","success","productComponent","$refs","productModal","httpMethod","hideModal","$httpMessageState","openDelProdictModal","delComponent","url","delete","render"],"mappings":"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","file":"assets/js/chunk-730caebe.0c068efa.js","sourcesContent":["var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","<template>\r\n<h3>這裡是 products</h3>\r\n  <div>\r\n    <Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"bte btn-primary\" type=\"button\" @click=\"openModal(true)\" >\r\n        建立新的產品\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th width=\"120\">分類</th>\r\n          <th>產品名稱</th>\r\n          <th width=\"120\">原價</th>\r\n          <th width=\"120\">售價</th>\r\n          <th width=\"100\">是否啟用</th>\r\n          <th width=\"200\">編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"item in products\" :key=\"item.id\">\r\n          <td>{{ item.category }}</td>\r\n          <td>{{ item.title }}</td>\r\n          <td class=\"text-right\">\r\n            <!-- 使用 filters 陣列方法帶出原價 -->\r\n            <!-- currency 可以將數字格式化為貨幣，默認是美元符號，你可以自己傳入所需的符號 -->\r\n            {{ $filters.currency(item.origin_price) }}\r\n          </td>\r\n          <td class=\"text-right\">\r\n            {{ $filters.currency(item.price) }}\r\n          </td>\r\n          <td>\r\n            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\r\n            <span v-else>未啟用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <!-- @click=\"openModal(false, item)\" 如果按鈕不是新增 就啟動編輯 -->\r\n              <button \r\n                class=\"btn btn-outline-danger btn-sm\" \r\n                type=\"button\" \r\n                @click=\"openModal(false, item)\">\r\n                編輯\r\n              </button>\r\n              <button \r\n                class=\"btn btn-outline-danger btn-sm\" \r\n                type=\"button\" \r\n                @click=\"openDelProuctModal(item)\">\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <Pagination :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\r\n    <ProductModal \r\n      @update-product=\"updateProduct\" \r\n      :product=\"tempProduct\" \r\n      :isNew=\"isNew\" \r\n      ref=\"productModal\" />\r\n      <DelModal :item=\"tempProduct\" ref=\"delModal\" @del-item=\"delProduct\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DelModal from '@/components/DelModal.vue';\r\nimport Pagination from '@/components/Pagination.vue';\r\nimport ProductModal from '@/components/ProductModal.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n      tempProduct:{},\r\n      isNew: false,\r\n      isLoading: false,\r\n      // ?\r\n      status: {\r\n        fileUploading: false,\r\n      },\r\n      modal: {\r\n        editModal: '',\r\n        delModal: '',\r\n      },\r\n      // 當前的頁面\r\n      currentPage: 1,\r\n    };\r\n  },\r\n  components: {\r\n    ProductModal,\r\n    DelModal,\r\n    Pagination,\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getProducts(page = 1) {\r\n      this.currentPage = page;\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\r\n      this.isLoading = true;\r\n      this.$http.get(api)\r\n      .then((response) => {\r\n        if(response.data.success) {\r\n          // 將商品回傳\r\n          this.products = response.data.products;\r\n          // 回傳商品分頁\r\n          this.pagination = response.data.pagination;\r\n          // 商品列表及頁面回傳完成 就把 loading 關掉\r\n          this.isLoading = false; \r\n        }\r\n      });\r\n    },\r\n    // 判斷是否為新增按鈕\r\n    openModal(isNew, item) {\r\n      if (isNew) {\r\n        this.tempProduct = {};\r\n        this.isNew = true;\r\n      } else {\r\n        this.tempProduct = { ...item };\r\n        this.isNew = false;\r\n      }\r\n      // 使用 $refs 取得動元素 彈出 Modal\r\n      const productComponent = this.$refs.productModal;\r\n      productComponent.openModal();\r\n    },\r\n    // 新增購物車\r\n    updateProduct(item) {\r\n      // 產品資料存入 tempProduct\r\n      this.tempProduct = item;\r\n      // ? 為什麼這裡不是 cart 而是 /admin/product\r\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\r\n      let httpMethod = 'post';\r\n      let status = '新增產品';\r\n      // 如果新增 在這裡反轉為編輯\r\n      if (!this.isNew) {\r\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\r\n        httpMethod = 'put';\r\n        status = '更新產品';\r\n      }\r\n      // ？\r\n      // 這裡我理解為 上面是判斷API該使用 post 或是 put\r\n      // 底下才是串接API\r\n      const productComponent = this.$refs.productModal;\r\n      this.$http[httpMethod](api, { data: this.tempProduct })\r\n      .then((response) => {\r\n        if(response.data.success) {\r\n          productComponent.hideModal();\r\n          // ?\r\n          this.getProducts(this.currentPage);\r\n        } else {\r\n          // ?\r\n          this.$httpMessageState(response, status);\r\n        }\r\n      });\r\n    },\r\n    // 刪除全部商品\r\n    openDelProdictModal(item) {\r\n      this.tempProduct = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.openModal();\r\n    },\r\n    // 刪除單一商品\r\n    delProduct() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url)\r\n      .then((response) => {\r\n        // ?\r\n        this.$httpMessageState(response, '刪除產品');\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getProducts(this.currentPage);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","const script = {}\n\nexport default script","const script = {}\n\nexport default script","const script = {}\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=2d7ca09b\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}