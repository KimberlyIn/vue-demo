(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-730caebe"],{dbb4:function(t,e,c){var n=c("23e7"),o=c("83ab"),r=c("56ef"),a=c("fc6a"),i=c("06cf"),s=c("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,c,n=a(t),o=i.f,d=r(n),u={},l=0;while(d.length>l)c=o(n,e=d[l++]),void 0!==c&&s(u,e,c);return u}})},e439:function(t,e,c){var n=c("23e7"),o=c("d039"),r=c("fc6a"),a=c("06cf").f,i=c("83ab"),s=o((function(){a(1)})),d=!i||s;n({target:"Object",stat:!0,forced:d,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a(r(t),e)}})},e6dc:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o=Object(n["f"])("h3",null,"這裡是 products",-1),r={class:"text-end mt-4"},a={class:"table mt-4"},i=Object(n["f"])("thead",null,[Object(n["f"])("tr",null,[Object(n["f"])("th",{width:"120"},"分類"),Object(n["f"])("th",null,"產品名稱"),Object(n["f"])("th",{width:"120"},"原價"),Object(n["f"])("th",{width:"120"},"售價"),Object(n["f"])("th",{width:"100"},"是否啟用"),Object(n["f"])("th",{width:"200"},"編輯")])],-1),s={class:"text-right"},d={class:"text-right"},u={key:0,class:"text-success"},l={key:1},p={class:"btn-group"};function b(t,e,c,b,f,h){var O=Object(n["y"])("Loading"),j=Object(n["y"])("Pagination"),g=Object(n["y"])("ProductModal"),m=Object(n["y"])("DelModal");return Object(n["r"])(),Object(n["e"])(n["a"],null,[o,Object(n["f"])("div",null,[Object(n["f"])(O,{active:f.isLoading,"z-index":1060},null,8,["active"]),Object(n["f"])("div",r,[Object(n["f"])("button",{class:"bte btn-primary",type:"button",onClick:e[1]||(e[1]=function(t){return h.openModal(!0)})}," 建立新的產品 ")]),Object(n["f"])("table",a,[i,Object(n["f"])("tbody",null,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["w"])(f.products,(function(e){return Object(n["r"])(),Object(n["e"])("tr",{key:e.id},[Object(n["f"])("td",null,Object(n["B"])(e.category),1),Object(n["f"])("td",null,Object(n["B"])(e.title),1),Object(n["f"])("td",s,Object(n["B"])(t.$filters.currency(e.origin_price)),1),Object(n["f"])("td",d,Object(n["B"])(t.$filters.currency(e.price)),1),Object(n["f"])("td",null,[e.is_enabled?(Object(n["r"])(),Object(n["e"])("span",u,"啟用")):(Object(n["r"])(),Object(n["e"])("span",l,"未啟用"))]),Object(n["f"])("td",null,[Object(n["f"])("div",p,[Object(n["f"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return h.openModal(!1,e)}}," 編輯 ",8,["onClick"]),Object(n["f"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(c){return t.openDelProuctModal(e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(n["f"])(j,{pages:f.pagination,onEmitPages:h.getProducts},null,8,["pages","onEmitPages"]),Object(n["f"])(g,{onUpdateProduct:h.updateProduct,product:f.tempProduct,isNew:f.isNew,ref:"productModal"},null,8,["onUpdateProduct","product","isNew"]),Object(n["f"])(m,{item:f.tempProduct,ref:"delModal",onDelItem:h.delProduct},null,8,["item","onDelItem"])])],64)}c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");var f=c("ade3");function h(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function O(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?h(Object(c),!0).forEach((function(e){Object(f["a"])(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):h(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}c("99af");const j={};var g=j;const m={};var P=m;const v={};var w=v,y={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1,status:{fileUploading:!1},modal:{editModal:"",delModal:""},currentPage:1}},components:{ProductModal:w,DelModal:g,Pagination:P},inject:["emitter"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io/","/api/").concat("jemmanine","/admin/products?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1)}))},openModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=O({},e),this.isNew=!1);var c=this.$refs.productModal;c.openModal()},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io/","/api/").concat("jemmanine","/admin/product"),n="post",o="新增產品";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","/api/").concat("jemmanine","/admin/product/").concat(this.tempProduct.id),n="put",o="更新產品");var r=this.$refs.productModal;this.$http[n](c,{data:this.tempProduct}).then((function(t){t.data.success?(r.hideModal(),e.getProducts(e.currentPage)):e.$httpMessageState(t,o)}))},openDelProdictModal:function(t){this.tempProduct=O({},t);var e=this.$refs.delModal;e.openModal()},delProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","/api/").concat("jemmanine","/admin/product/").concat(this.tempProduct.id);this.isLoading=!0,this.$http.delete(e).then((function(e){t.$httpMessageState(e,"刪除產品");var c=t.$refs.delModal;c.hideModal(),t.getProducts(t.currentPage)}))}}};y.render=b;e["default"]=y}}]);
//# sourceMappingURL=chunk-730caebe.0c068efa.js.map